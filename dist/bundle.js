(()=>{"use strict";var e=document.createElement("div");e.id="settingsScreen";var t=document.createElement("div");t.id="rotorsScreen",e.appendChild(t);var n=document.createElement("hr");n.style.width="1px",n.style.height="100%",n.style.float="left",n.style.margin="0",n.style.border="0",n.style.padding="0",n.style.color="balck",n.style.background="black",e.appendChild(n);var o=document.createElement("div");o.id="rotorLabelDiv",t.appendChild(o);var i=document.createElement("h2");i.textContent="Rotors",i.style.paddingTop="15%",o.appendChild(i);var r=document.createElement("div");r.style.height="18%",r.style.width="100%",r.className="rotorDiv",t.appendChild(r);var a=document.createElement("label");a.textContent="Position for rotor I",r.appendChild(a);var d=document.createElement("input");d.type="text",d.placeholder="1",d.style.width="20%",r.appendChild(d);var l=document.createElement("label");l.textContent="Notch positions:",r.appendChild(l);var c=document.createElement("input");c.placeholder="1",c.style.width="20%",r.appendChild(c);var p=document.createElement("div");p.style.height="18%",p.style.width="100%",p.className="rotorDiv",t.appendChild(p);var h=document.createElement("label");h.textContent="Position for rotor II",p.appendChild(h);var u=document.createElement("input");u.placeholder="1",u.type="text",u.style.width="20%",p.appendChild(u);var s=document.createElement("label");s.textContent="Notch positions:",p.appendChild(s);var m=document.createElement("input");m.placeholder="1",m.style.width="20%",p.appendChild(m);var C=document.createElement("div");C.style.height="18%",C.style.width="100%",C.className="rotorDiv",t.appendChild(C);var v=document.createElement("label");v.textContent="Position for rotor III",C.appendChild(v);var g=document.createElement("input");g.placeholder="1",g.type="text",g.style.width="20%",C.appendChild(g);var f=document.createElement("label");f.textContent="Notch positions:",C.appendChild(f);var y=document.createElement("input");y.placeholder="1",y.style.width="20%",C.appendChild(y);var E=document.createElement("div");E.style.height="18%",E.style.width="100%",E.className="rotorDiv",t.appendChild(E);var w=document.createElement("label");w.textContent="Position for rotor IV",E.appendChild(w);var S=document.createElement("input");S.type="text",S.placeholder="1",S.style.width="20%",E.appendChild(S);var x=document.createElement("label");x.textContent="Notch positions:",E.appendChild(x);var b=document.createElement("input");b.placeholder="1",b.style.width="20%",E.appendChild(b);var I=document.createElement("div");I.style.height="18%",I.style.width="100%",I.className="rotorDiv",t.appendChild(I);var M=document.createElement("label");M.textContent="Position for rotor V",I.appendChild(M);var D=document.createElement("input");D.type="text",D.placeholder="1",D.style.width="20%",I.appendChild(D);var B=document.createElement("label");B.textContent="Notch positions:",I.appendChild(B);var N=document.createElement("input");N.placeholder="1",N.style.width="20%",I.appendChild(N);for(var k=[d,u,g,S,D],P=[1,1,1,1,1],A=function(e){k[e].onchange=function(){k[e]?P[e]=parseInt(k[e].value):P[e]=1}},R=0;R<5;R++)A(R);var L=[c,m,y,b,N],O=[[1],[1],[1],[1],[1]],V=function(e){L[e].onchange=function(){if(L[e]){var t=[];L[e].value.split(",").forEach((function(e){t.push(parseInt(e))})),O[e]=t}}};for(R=0;R<5;R++)V(R);var T=document.createElement("div");T.id="plugScreen",T.style.height="100%",T.style.width="69%",T.style.paddingLeft="5px",T.style.float="left",e.appendChild(T);var j=document.createElement("div");j.id="plugScreenLabel",T.appendChild(j);var q=document.createElement("button");q.textContent="Back",q.id="buttonBack",j.appendChild(q);var z=new Map,F=new Map,G=document.createElement("h2");for(G.textContent="plugboard",j.appendChild(G),R=32;R<=126;R++){var H=document.createElement("div");H.className="plugDiv",T.appendChild(H);var J=document.createElement("h5");J.textContent=String.fromCharCode(R),J.style.margin="5px",J.style.float="left",H.appendChild(J);var K=document.createElement("input");K.type="text",K.style.width="20%",K.style.float="right",K.style.marginRight="23%",K.placeholder=String.fromCharCode(R),H.appendChild(K),z.set(R,K),F.set(R,H)}var Q=new Map;for(R=32;R<=126;R++)Q.set(String.fromCharCode(R),String.fromCharCode(R));var U=function(e){z.get(e).onchange=function(){!function(e){var t=z.get(e).value;if(t){var n=t.charCodeAt(0);z.get(e).value=String.fromCharCode(n),z.get(n).value=String.fromCharCode(e),F.get(e).style.color="lightgreen",F.get(n).style.color="lightgreen";var o=Q.get(String.fromCharCode(e)).charCodeAt(0);o!==e&&(z.get(o).value="",F.get(o).style.color="#D22730"),Q.set(String.fromCharCode(n),String.fromCharCode(e)),Q.set(String.fromCharCode(e),String.fromCharCode(n))}else n=Q.get(String.fromCharCode(e)).charCodeAt(0),z.get(n).value="",F.get(e).style.color="#D22730",F.get(n).style.color="#D22730",Q.set(String.fromCharCode(n),String.fromCharCode(n)),Q.set(String.fromCharCode(e),String.fromCharCode(e))}(e)}};for(R=32;R<=126;R++)U(R);var W=document.createElement("button");W.textContent="Reset",W.id="buttonReset",T.appendChild(W),W.onclick=function(){for(var e=32;e<=126;e++)Q.set(String.fromCharCode(e),String.fromCharCode(e)),F.get(e).style.color="#D22730",z.get(e).value=""};var X="input",Y=document.getElementById("inputScreen"),Z=document.getElementById("main");document.getElementById("changeSettings").onclick=function(){"input"===X&&(Z.removeChild(Y),Z.appendChild(e),X="settings")},q.onclick=function(){"settings"===X&&(Z.removeChild(e),Z.appendChild(Y),X="input")};var $=function(){function e(e,t,n){this.notch=e,this.initPosition=t,this.charMap=n}return e.prototype.spin=function(e){for(this.notch+=e;this.notch>=95;)this.notch-=95;for(var t=new Map,n=32;n<=126;n++){for(var o=n+e;o>126;)o-=95;for(var i=this.charMap.get(n)+e;i>126;)i-=95;t.set(o,i)}this.charMap=t},e.prototype.init=function(){this.spin(this.initPosition),this.notch-=this.initPosition},e.prototype.output=function(e){return this.charMap.get(e)},e}(),_=new Map([[124,94],[94,124],[50,86],[86,50],[76,81],[81,76],[91,113],[113,91],[40,53],[53,40],[88,66],[66,88],[51,120],[120,51],[111,46],[46,111],[105,79],[79,105],[114,123],[123,114],[65,75],[75,65],[103,48],[48,103],[70,95],[95,70],[112,74],[74,112],[36,47],[47,36],[98,89],[89,98],[107,108],[108,107],[57,52],[52,57],[83,64],[64,83],[62,110],[110,62],[92,69],[69,92],[117,115],[115,117],[39,104],[104,39],[101,35],[35,101],[126,44],[44,126],[85,43],[43,85],[77,119],[119,77],[45,84],[84,45],[109,125],[125,109],[96,56],[56,96],[49,73],[73,49],[38,102],[102,38],[116,58],[58,116],[55,72],[72,55],[54,59],[59,54],[118,37],[37,118],[97,100],[100,97],[32,121],[121,32],[63,106],[106,63],[87,41],[41,87],[60,71],[71,60],[67,90],[90,67],[78,34],[34,78],[68,68],[61,80],[80,61],[42,42],[82,122],[122,82],[33,33],[93,99],[99,93]]),ee=new Map([[54,65],[65,54],[119,67],[67,119],[99,124],[124,99],[104,48],[48,104],[61,58],[58,61],[87,42],[42,87],[78,39],[39,78],[57,71],[71,57],[73,82],[82,73],[110,53],[53,110],[60,47],[47,60],[36,64],[64,36],[44,108],[108,44],[121,79],[79,121],[100,86],[86,100],[103,88],[88,103],[32,37],[37,32],[91,118],[118,91],[51,50],[50,51],[107,55],[55,107],[94,93],[93,94],[109,92],[92,109],[85,101],[101,85],[40,125],[125,40],[66,66],[35,84],[84,35],[52,41],[41,52],[43,76],[76,43],[126,56],[56,126],[69,33],[33,69],[38,95],[95,38],[68,63],[63,68],[72,72],[74,115],[115,74],[117,122],[122,117],[81,97],[97,81],[120,98],[98,120],[59,34],[34,59],[75,113],[113,75],[123,49],[49,123],[111,62],[62,111],[77,77],[96,116],[116,96],[112,45],[45,112],[106,105],[105,106],[102,90],[90,102],[89,83],[83,89],[114,80],[80,114],[46,46],[70,70]]),te=new Map([[36,108],[108,36],[61,38],[38,61],[39,62],[62,39],[60,71],[71,60],[55,123],[123,55],[50,88],[88,50],[69,114],[114,69],[102,85],[85,102],[70,106],[106,70],[101,40],[40,101],[74,41],[41,74],[59,112],[112,59],[118,34],[34,118],[65,64],[64,65],[89,96],[96,89],[66,94],[94,66],[53,116],[116,53],[72,43],[43,72],[83,58],[58,83],[37,113],[113,37],[76,110],[110,76],[109,51],[51,109],[111,125],[125,111],[97,93],[93,97],[63,105],[105,63],[49,67],[67,49],[124,57],[57,124],[44,52],[52,44],[122,115],[115,122],[90,81],[81,90],[104,98],[98,104],[121,46],[46,121],[99,33],[33,99],[86,42],[42,86],[80,84],[84,80],[120,47],[47,120],[73,117],[117,73],[95,56],[56,95],[87,77],[77,87],[107,32],[32,107],[119,100],[100,119],[75,68],[68,75],[48,91],[91,48],[103,78],[78,103],[54,45],[45,54],[35,35],[92,126],[126,92],[79,82],[82,79]]),ne=new Map([[72,99],[99,72],[77,115],[115,77],[124,50],[50,124],[64,64],[67,45],[45,67],[36,125],[125,36],[39,56],[56,39],[84,110],[110,84],[114,69],[69,114],[73,108],[108,73],[71,112],[112,71],[82,96],[96,82],[101,52],[52,101],[83,95],[95,83],[34,90],[90,34],[62,116],[116,62],[78,111],[111,78],[106,33],[33,106],[121,123],[123,121],[103,119],[119,103],[100,70],[70,100],[59,105],[105,59],[92,74],[74,92],[53,109],[109,53],[37,79],[79,37],[43,32],[32,43],[80,81],[81,80],[58,88],[88,58],[91,40],[40,91],[35,49],[49,35],[41,104],[104,41],[76,60],[60,76],[89,94],[94,89],[66,66],[113,86],[86,113],[75,65],[65,75],[46,48],[48,46],[87,55],[55,87],[102,117],[117,102],[47,122],[122,47],[93,57],[57,93],[54,42],[42,54],[68,98],[98,68],[51,118],[118,51],[120,61],[61,120],[107,63],[63,107],[126,38],[38,126],[44,97],[97,44],[85,85]]),oe=new Map([[96,99],[99,96],[109,82],[82,109],[94,125],[125,94],[53,114],[114,53],[90,45],[45,90],[101,123],[123,101],[106,65],[65,106],[59,118],[118,59],[75,104],[104,75],[54,116],[116,54],[42,38],[38,42],[111,79],[79,111],[66,57],[57,66],[39,58],[58,39],[73,63],[63,73],[77,55],[55,77],[33,56],[56,33],[107,103],[103,107],[100,61],[61,100],[120,92],[92,120],[89,69],[69,89],[32,88],[88,32],[112,105],[105,112],[35,86],[86,35],[49,50],[50,49],[97,48],[48,97],[108,67],[67,108],[76,80],[80,76],[46,40],[40,46],[81,62],[62,81],[119,83],[83,119],[71,44],[44,71],[115,95],[95,115],[84,60],[60,84],[64,51],[51,64],[47,117],[117,47],[110,98],[98,110],[113,121],[121,113],[74,122],[122,74],[126,87],[87,126],[68,93],[93,68],[102,124],[124,102],[78,78],[91,37],[37,91],[34,85],[85,34],[41,36],[36,41],[43,52],[52,43],[72,70],[70,72]]),ie=document.getElementById("encodeInput"),re=document.getElementById("encodeOutput");document.getElementById("buttonEncode").onclick=function(){var e,t,n,o=new $(1,P[0],_),i=new $(1,P[1],ee),r=new $(1,P[2],te),a=new $(1,P[3],ne),d=new $(1,P[4],oe);o.init(),i.init(),r.init(),a.init(),d.init(),re.value=(e=ie.value,t=e.split(""),n="",t.forEach((function(e){var t=function(e){var t=d.output(a.output(r.output(i.output(o.output(e.charCodeAt(0))))));return o.spin(1),O[0].includes(o.notch)&&i.spin(1),O[1].includes(i.notch)&&r.spin(1),O[2].includes(r.notch)&&a.spin(1),O[3].includes(a.notch)&&d.spin(1),String.fromCharCode(t)}(Q.get(e));n+=Q.get(t)})),n)};var ae=document.getElementById("decodeInput"),de=document.getElementById("decodeOutput");document.getElementById("buttonDecode").onclick=function(){var e,t,n,o=new $(1,P[0],_),i=new $(1,P[1],ee),r=new $(1,P[2],te),a=new $(1,P[3],ne),d=new $(1,P[4],oe);o.init(),i.init(),r.init(),a.init(),d.init(),de.value=(e=ae.value,t=e.split(""),n="",t.forEach((function(e){var t=function(e){var t=o.output(i.output(r.output(a.output(d.output(e.charCodeAt(0))))));return o.spin(1),O[0].includes(o.notch)&&i.spin(1),O[1].includes(i.notch)&&r.spin(1),O[2].includes(r.notch)&&a.spin(1),O[3].includes(a.notch)&&d.spin(1),String.fromCharCode(t)}(Q.get(e));n+=Q.get(t)})),n)}})();